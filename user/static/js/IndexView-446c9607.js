import{h as r,A as T,_ as B,q as p,o as u,s as W,w as d,v as X,d as Y,x as Z,y as K,z as ee,B as ae,r as g,C as te,e as se,f as ne,c as f,a as t,F as C,D as F,u as s,t as O,E as oe,n as re,j as I,k as L,G as V,H as le,I as ce,J as M,K as ie,L as ue,M as $}from"./--6c1c64a1.js";var de={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M904 512h-56c-4.4 0-8 3.6-8 8v320H184V184h320c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V520c0-4.4-3.6-8-8-8z"}},{tag:"path",attrs:{d:"M355.9 534.9L354 653.8c-.1 8.9 7.1 16.2 16 16.2h.4l118-2.9c2-.1 4-.9 5.4-2.3l415.9-415c3.1-3.1 3.1-8.2 0-11.3L785.4 114.3c-1.6-1.6-3.6-2.3-5.7-2.3s-4.1.8-5.7 2.3l-415.8 415a8.3 8.3 0 00-2.3 5.6zm63.5 23.6L779.7 199l45.2 45.1-360.5 359.7-45.7 1.1.7-46.4z"}}]},name:"form",theme:"outlined"};const ve=de;function j(n){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?Object(arguments[e]):{},c=Object.keys(a);typeof Object.getOwnPropertySymbols=="function"&&(c=c.concat(Object.getOwnPropertySymbols(a).filter(function(v){return Object.getOwnPropertyDescriptor(a,v).enumerable}))),c.forEach(function(v){fe(n,v,a[v])})}return n}function fe(n,e,a){return e in n?Object.defineProperty(n,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):n[e]=a,n}var x=function(e,a){var c=j({},e,a.attrs);return r(T,j({},c,{icon:ve}),null)};x.displayName="FormOutlined";x.inheritAttrs=!1;const pe=x,_e={};function me(n,e){const a=p("a-config-provider");return u(),W(a,{theme:{token:{colorPrimary:"#f55151",borderRadius:0}}},{default:d(()=>[X(n.$slots,"default")]),_:3})}const ge=B(_e,[["render",me]]),he={class:"preview-avatar-wrapper"},be={class:"bg-filter"},ye={class:"bg-cover"},we={class:"avatar-wrapper"},ke={class:"basic-info"},Ce={class:"username"},Oe={class:"subtext"},Me={class:"main-wrapper"},xe={key:0,class:"menu-panel"},Se=["onClick"],Ae={class:"user-panel-item-text"},Pe=Y({__name:"IndexView",setup(n){const e=Z(()=>"/images/user/bg"+Math.floor(Math.random()*6)+".jpeg"),a=K(),c=ee(),v=ae().userState,_=g(""),N=le(),{handleChange:H,beforeUpload:R,fileList:h,preview:b,file:y}=te({isPreview:!0,originPreview:_}),m=g(!1);function S(){ce().then(l=>{v.username=l.data.data.account||l.data.data.nickname||"",_.value=l.data.data.faceUrl||""})}function D(){b.value=_.value,m.value=!0}function E(){if(y.value){const{promise:l}=ue(y.value);l.then(()=>{$.success("头像上传成功"),S()}).catch(()=>{b.value=_.value})}else $.error("请先选择头像图片")}function G(){console.log("showMagic")}const A=g(0),P=g([]);function U(){A.value=Math.floor(Math.random()*32),P.value=Array.from({length:32},(l,i)=>i)}return se(()=>{const l=ne();l.value=!1,U(),S(),console.log(c)}),(l,i)=>{const w=p("a-button"),z=p("a-avatar"),Q=p("a-upload"),q=p("a-modal"),J=p("router-view");return u(),f(C,null,[r(ge,null,{default:d(()=>[r(q,{open:m.value,"onUpdate:open":i[2]||(i[2]=o=>m.value=o),title:"编辑头像"},{footer:d(()=>[r(w,{key:"back",onClick:i[0]||(i[0]=o=>m.value=!1)},{default:d(()=>[M("取消")]),_:1}),r(w,{key:"submit",type:"primary",onClick:E,disabled:!s(y)},{default:d(()=>[M("上传")]),_:1},8,["disabled"])]),default:d(()=>[t("div",he,[r(z,{class:"preview-avatar",src:s(b),size:150},null,8,["src"]),r(Q,{class:"avatar-uploader",accept:"image/*","file-list":s(h),"onUpdate:fileList":i[1]||(i[1]=o=>ie(h)?h.value=o:null),onChange:s(H),"before-upload":s(R),"max-count":1},{default:d(()=>[t("div",null,[r(w,{type:"dashed"},{default:d(()=>[M(" 选择头像文件 ")]),_:1})])]),_:1},8,["file-list","onChange","before-upload"])])]),_:1},8,["open"])]),_:1}),t("div",{class:"basic-info-wrapper",style:re({backgroundImage:`url(${e.value})`})},[t("div",be,[t("div",ye,[(u(!0),f(C,null,F(P.value,(o,k)=>(u(),f("div",{key:k+o,class:"bg-block"},[k===A.value?(u(),f("div",{key:0,onClick:G,class:"magic",onMouseout:U},null,32)):V("",!0)]))),128))]),t("div",we,[r(z,{class:"avatar",src:_.value,size:64},null,8,["src"]),t("div",{onClick:D,class:"avatar-cover"},[r(s(pe))])]),t("div",ke,[t("div",Ce,O(s(v).username||"用户名不见了QAQ"),1),t("div",Oe,O(s(oe)()),1)])])],4),t("div",Me,[t("div",{class:I(["content-wrapper",s(L)()?"mobile":""])},[s(L)()?V("",!0):(u(),f("div",xe,[(u(!0),f(C,null,F(s(N).children,o=>(u(),f("a",{class:I(["menu-panel-item",s(c).name===o.name?"active":""]),key:o.name,onClick:k=>s(a).push({name:o.name})},[t("span",Ae,O(o.title),1)],10,Se))),128))])),r(J)],2)])],64)}}});const ze=B(Pe,[["__scopeId","data-v-ef405c75"]]);export{ze as default};
